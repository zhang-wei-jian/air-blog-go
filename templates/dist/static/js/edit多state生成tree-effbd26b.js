import{a as N,b as A,c as O,d as $}from"./useRowConversionTree-f86c56ba.js";import{V as z}from"./index-7545bf4b.js";import{d as J,p as U,n as y,a0 as E,P as I,r as _,o as r,c as i,e as n,j as d,g as v,h as C,z as p,f as V,C as c,Q as T}from"./index-8391854f.js";import"./MyAutocomplete.vue_vue_type_script_setup_true_lang-0b0173c6.js";import"./APIcallLine-15ecf2b5.js";const P={class:"dialog-Wrap"},Q={key:0},W={key:1},G={class:"treeData"},H={class:"label"},K={key:1},L={key:0},M=v("h3",{style:{color:"red"}},"State",-1),X={class:"treeData"},Y={class:"label"},Z={key:1},ee={class:"dialog-footer"},re=J({__name:"edit多state生成tree",props:{selctionRow:Object,visible:Number},emits:["handleCloseVisiable","upData"],setup(D,{emit:k}){const l=D,S=N(),h=U(()=>S.rowStateTree[s.value.itemName]);let s=y({});const u=y(),g=y(!!l.visible),b=o=>{if(g.value=!1,o===void 0)for(let e in s)s[e]="";else o.resetFields(),s.id="";k("handleCloseVisiable")},f=y();E({name:[{required:!0,message:"线路名称不能为空",trigger:"blur"},{min:2,max:20,message:"线路名称为3～20个字符",trigger:"blur"}],caller:[{required:!0,message:"线路名称不能为空",trigger:"blur"}],dialstr:[{required:!0,message:"拨号串不能为空",trigger:"blur"}],rest:[{type:"number",required:!0,trigger:"blur",min:5,max:600,validator:(o,e,m)=>{if(!e)return m(new Error("呼叫间隔不能为空"));if(!Number.isInteger(e))return m(new Error("呼叫间隔为5～600秒之间的整数值"));if(e<5||e>600)return m(new Error("呼叫间隔为5～600秒之间的整数值"));m()}}],count:[{required:!0,message:"呼叫并发不能为空",trigger:"blur"},{type:"number",min:1,max:100,message:"呼叫并发范围为1～100",trigger:"blur"}],timeout:[{required:!0,message:"呼叫超时不能为空",trigger:"blur"},{type:"number",min:40,max:300,message:"呼叫超时范围为40～300",trigger:"blur"}]});const F=async o=>{o&&await o.validate((e,m)=>{if(e)switch(l.visible){case 1:q(),b(o);break;case 2:R(),b(o);break}})},q=()=>{k("upData",u,s.value.itemName)},R=()=>{k("upData",u,s.value.itemName)};return I(()=>l.visible,(o,e)=>{g.value=!!o,o===1?(s.value=JSON.parse(JSON.stringify(l.selctionRow)),u.value=A(s.value),u.value=O(s.value)):o===2&&(s.value.itemName="",u.value=$(N().thisTemplate))}),(o,e)=>{const m=_("el-input"),w=_("el-tree"),B=_("el-form"),x=_("el-button"),j=_("el-dialog");return r(),i("div",P,[n(j,{modelValue:g.value,"onUpdate:modelValue":e[3]||(e[3]=a=>g.value=a),draggable:"",onClose:e[4]||(e[4]=a=>b(f.value)),"close-on-click-modal":!1,title:l.visible===1?"编辑线路":l.visible===2?"新增线路":"查看线路",width:"640px","align-center":"",center:""},{footer:d(()=>[v("span",ee,[n(x,{onClick:e[1]||(e[1]=a=>b(f.value))},{default:d(()=>[C("取 消")]),_:1}),n(x,{type:"primary",onClick:e[2]||(e[2]=a=>F(f.value))},{default:d(()=>[C("确 定")]),_:1})])]),default:d(()=>[n(B,{model:u.value,ref_key:"ruleFormRef",ref:f,"label-width":"120px"},{default:d(()=>[l.visible===1?(r(),i("h2",Q,"名称:"+p(V(s).itemName),1)):c("",!0),l.visible===2?(r(),i("h2",W,[C("名称: "),n(m,{modelValue:V(s).itemName,"onUpdate:modelValue":e[0]||(e[0]=a=>V(s).itemName=a)},null,8,["modelValue"])])):c("",!0),n(w,{data:u.value,"node-key":"id","default-expand-all":"","expand-on-click-node":!1},{default:d(({node:a,data:t})=>[v("div",G,[v("span",H,p(a.label),1),t.state?(r(),i("div",{key:0,class:T({state:!0,stateColor:String(t.value)!==t.state&&t.value!=t.state})},p(t.state),3)):c("",!0),t.type!=="object"?(r(),i("span",K,[n(z,{data:t},null,8,["data"])])):c("",!0)])]),_:1},8,["data"])]),_:1},8,["model"]),h.value?(r(),i("div",L,[M,n(w,{data:h.value,"node-key":"id","default-expand-all":"","expand-on-click-node":!1},{default:d(({node:a,data:t})=>[v("div",X,[v("span",Y,p(a.label),1),t.state?(r(),i("div",{key:0,class:T({state:!0,stateColor:String(t.value)!==t.state&&t.value!=t.state})},p(t.state),3)):c("",!0),t.type!=="object"?(r(),i("span",Z,p(t.value)+" ",1)):c("",!0)])]),_:1},8,["data"])])):c("",!0)]),_:1},8,["modelValue","title"])])}}});export{re as default};
