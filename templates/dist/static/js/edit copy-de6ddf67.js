import{d as h,a0 as w,n as C,P as B,r as i,o as M,c as O,e as l,j as n,g as T,h as m,f as a}from"./index-8391854f.js";const A={class:"dialog-Wrap"},j={class:"dialog-footer"},E=h({__name:"edit copy",props:{selctionRow:Object,visible:Number},emits:["handleCloseVisiable","upData"],setup(U,{emit:V}){const p=U;let o=w({tenantId:0,id:"",name:"",caller:"",dialstr:"",rest:5,codec:[],count:1,timeout:60,fault_threshold:0,ignore_early_media:!0,employee_id:"",bill_least1s:1,bill_round:0,bill_round_minute:0,addTime:0,updateTime:0});const b=C(!!p.visible),f=r=>{if(b.value=!1,r===void 0)for(let e in o)o[e]="";else r.resetFields(),o.id="";V("handleCloseVisiable")},_=C(),x=w({name:[{required:!0,message:"线路名称不能为空",trigger:"blur"},{min:2,max:20,message:"线路名称为3～20个字符",trigger:"blur"}],caller:[{required:!0,message:"线路名称不能为空",trigger:"blur"}],dialstr:[{required:!0,message:"拨号串不能为空",trigger:"blur"}],rest:[{type:"number",required:!0,trigger:"blur",min:5,max:600,validator:(r,e,u)=>{if(!e)return u(new Error("呼叫间隔不能为空"));if(!Number.isInteger(e))return u(new Error("呼叫间隔为5～600秒之间的整数值"));if(e<5||e>600)return u(new Error("呼叫间隔为5～600秒之间的整数值"));u()}}],count:[{required:!0,message:"呼叫并发不能为空",trigger:"blur"},{type:"number",min:1,max:100,message:"呼叫并发范围为1～100",trigger:"blur"}],timeout:[{required:!0,message:"呼叫超时不能为空",trigger:"blur"},{type:"number",min:40,max:300,message:"呼叫超时范围为40～300",trigger:"blur"}]}),P=async r=>{r&&await r.validate((e,u)=>{if(e)switch(p.visible){case 1:F(),f(r);break;case 2:I(),f(r);break}})},F=()=>{V("upData",o)},I=()=>{V("upData",o)};return B(()=>p.visible,(r,e)=>{if(b.value=!!r,r===1)for(let u in o)o[u]=p.selctionRow[u]}),(r,e)=>{const u=i("el-input"),d=i("el-form-item"),s=i("el-option"),c=i("el-select"),g=i("el-input-number"),v=i("el-text"),N=i("IconifyIconOffline"),R=i("el-switch"),$=i("el-collapse-item"),k=i("el-collapse"),q=i("el-form"),y=i("el-button"),D=i("el-dialog");return M(),O("div",A,[l(D,{modelValue:b.value,"onUpdate:modelValue":e[17]||(e[17]=t=>b.value=t),onClose:e[18]||(e[18]=t=>f(_.value)),title:"编辑",width:"640px","align-center":"",center:""},{footer:n(()=>[T("span",j,[l(y,{onClick:e[15]||(e[15]=t=>f(_.value))},{default:n(()=>[m("取 消")]),_:1}),l(y,{type:"primary",onClick:e[16]||(e[16]=t=>P(_.value))},{default:n(()=>[m("确 定")]),_:1})])]),default:n(()=>[l(q,{model:a(o),ref_key:"ruleFormRef",ref:_,rules:x,"label-width":"120px"},{default:n(()=>[l(d,{label:"线路名称",prop:"name"},{default:n(()=>[l(u,{modelValue:a(o).name,"onUpdate:modelValue":e[0]||(e[0]=t=>a(o).name=t),placeholder:"请输入线路名称"},null,8,["modelValue"])]),_:1}),l(d,{label:"主叫号码",prop:"caller"},{default:n(()=>[l(u,{modelValue:a(o).caller,"onUpdate:modelValue":e[1]||(e[1]=t=>a(o).caller=t),placeholder:"请输入线主叫号码"},null,8,["modelValue"])]),_:1}),l(d,{label:"拨号串",prop:"dialstr"},{default:n(()=>[l(u,{modelValue:a(o).dialstr,"onUpdate:modelValue":e[3]||(e[3]=t=>a(o).dialstr=t),placeholder:"请输入拨号串",class:"input-with-select"},{append:n(()=>[l(c,{placeholder:"选择",style:{width:"80px"},onChange:e[2]||(e[2]=t=>{a(o).dialstr=t})},{default:n(()=>[l(s,{label:"sofia/gateway/网关名/${destination_number}",value:"sofia/gateway/网关名/${destination_number}"}),l(s,{label:"user/分机号",value:"user/分机号"}),l(s,{label:"sofia/external/${destination_number}@落地IP:落地PORT",value:"sofia/external/${destination_number}@落地IP:落地PORT"})]),_:1})]),_:1},8,["modelValue"])]),_:1}),l(d,{label:"呼叫间隔",prop:"rest"},{default:n(()=>[l(g,{modelValue:a(o).rest,"onUpdate:modelValue":e[4]||(e[4]=t=>a(o).rest=t),"controls-position":"right"},null,8,["modelValue"]),l(v,{truncated:""},{default:n(()=>[m("（单位：秒）")]),_:1})]),_:1}),l(d,{label:"音频编码"},{default:n(()=>[l(c,{modelValue:a(o).codec,"onUpdate:modelValue":e[5]||(e[5]=t=>a(o).codec=t),placeholder:"自动协商",multiple:"true"},{default:n(()=>[l(s,{label:"PCMU",value:"PCMU"}),l(s,{label:"PCMA",value:"PCMA"}),l(s,{label:"G729",value:"G729"})]),_:1},8,["modelValue"])]),_:1}),l(d,{label:"呼叫并发",prop:"count"},{default:n(()=>[l(g,{modelValue:a(o).count,"onUpdate:modelValue":e[6]||(e[6]=t=>a(o).count=t),"controls-position":"right",onChange:r.handleChange},null,8,["modelValue","onChange"])]),_:1}),l(d,{label:"呼叫超时",prop:"timeout"},{default:n(()=>[l(g,{modelValue:a(o).timeout,"onUpdate:modelValue":e[7]||(e[7]=t=>a(o).timeout=t),"controls-position":"right"},null,8,["modelValue"]),l(v,{truncated:""},{default:n(()=>[m("（单位：秒）")]),_:1})]),_:1}),l(k,{accordion:"",modelValue:r.activeNames,"onUpdate:modelValue":e[14]||(e[14]=t=>r.activeNames=t),onChange:r.handleChange},{default:n(()=>[l($,{name:"1"},{title:n(()=>[m(" 更多参数设置 "),l(N,{icon:r.More},null,8,["icon"])]),default:n(()=>[l(d,{label:"失败阈值次数"},{default:n(()=>[l(u,{modelValue:a(o).fault_threshold,"onUpdate:modelValue":e[8]||(e[8]=t=>a(o).fault_threshold=t),placeholder:"失败阈值次数"},null,8,["modelValue"])]),_:1}),l(d,{label:"忽略彩铃"},{default:n(()=>[l(R,{modelValue:a(o).ignore_early_media,"onUpdate:modelValue":e[9]||(e[9]=t=>a(o).ignore_early_media=t),"active-text":"开","inactive-text":"关"},null,8,["modelValue"])]),_:1}),l(d,{label:"坐席工号"},{default:n(()=>[l(u,{modelValue:a(o).employee_id,"onUpdate:modelValue":e[10]||(e[10]=t=>a(o).employee_id=t),placeholder:"请输入坐席工号"},null,8,["modelValue"])]),_:1}),l(d,{label:"最少计费时间"},{default:n(()=>[l(u,{modelValue:a(o).bill_least1s,"onUpdate:modelValue":e[11]||(e[11]=t=>a(o).bill_least1s=t),placeholder:"请输入最少计费时间"},null,8,["modelValue"])]),_:1}),l(d,{label:" 每秒计费精度"},{default:n(()=>[l(u,{modelValue:a(o).bill_round,"onUpdate:modelValue":e[12]||(e[12]=t=>a(o).bill_round=t),placeholder:"请输入每秒计费精度"},null,8,["modelValue"])]),_:1}),l(d,{label:" 按分钟上浮"},{default:n(()=>[l(u,{modelValue:a(o).bill_round_minute,"onUpdate:modelValue":e[13]||(e[13]=t=>a(o).bill_round_minute=t),placeholder:"请输入按分钟上浮"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue","onChange"])]),_:1},8,["model","rules"])]),_:1},8,["modelValue"])])}}});export{E as default};
