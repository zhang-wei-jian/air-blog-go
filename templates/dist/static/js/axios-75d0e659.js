import{a_ as l,a$ as n,b0 as c,ax as i,aT as m}from"./index-8391854f.js";const p=l.CancelToken,u=l.create({});u.interceptors.request.use(function(e){if(e.url.includes("Down")||e.url.includes("action=ExportRedisConfig")){e.cancelToken=new p(a=>{e.url,a()});const t=localStorage.getItem("baseURL");e.baseURL=localStorage.getItem("baseURL");const r=localStorage.getItem("token")||n();if(r){const a=e.url.includes("?")?"&":"?";e.url+=`${a}token=${encodeURIComponent(r)}`}c(t+e.url);return}e.headers["Content-Type"]="multipart/form-data",localStorage.getItem("baseURL"),e.baseURL=localStorage.getItem("baseURL");const s=localStorage.getItem("token")||n();if(s){const t=e.url.includes("?")?"&":"?";e.url+=`${t}token=${encodeURIComponent(s)}`}e.url==="/api/add_article_model"&&(e.headers["Content-Type"]="multipart/form-data");const o=localStorage.getItem("access_token");return o&&(e.headers.Authorization=`Bearer ${o}`),e},function(e){return Promise.reject(e)});u.interceptors.response.use(function(e){return e.data},function(e){return e.response.status===401&&(i("token过期,请重新登录"+JSON.stringify(errorMsg)),m().logOut()),e.response.status===403&&alert("禁止访问"),e.response.status===404&&alert("错误访问"),e.response.status===5e3&&alert("服务器出错"),Promise.reject(e)});export{u as i};
