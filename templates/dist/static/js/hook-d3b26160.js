import{aR as S,n as a,a0 as c,p as m,t as C,ax as q}from"./index-8391854f.js";import{u as x}from"./useArrConversionMapObj-53d04e92.js";import{u as I}from"./useRowState-f0ac559e.js";import{a as R,b as F,c as z,d as P,e as Y}from"./APIcallLine-15ecf2b5.js";import"./useRowConversionTree-f86c56ba.js";S(new Date).format("YYYY-MM-DD");const $=a({list:[{tenantId:1,id:"cl1001",name:"line1",caller:"18118181818",dialstr:"sofia/gateway/ims/${destination_number}",rest:1,codec:[],count:1,timeout:60,fault_threshold:0,ignore_early_media:!0,employee_id:"",bill_least1s:1,bill_round:0,bill_round_minute:0,addTime:1678961299821,updateTime:1678961314910},{tenantId:1,id:"cl1002",name:"line2",caller:"18118181819",dialstr:"sofia/gateway/ims/${destination_number}",rest:1,codec:[],count:1,timeout:60,fault_threshold:0,ignore_early_media:!0,employee_id:"",bill_least1s:1,bill_round:0,bill_round_minute:0,addTime:1678961299821,updateTime:1678961314910},{tenantId:1,id:"cl1003",name:"line3",caller:"18118181820",dialstr:"sofia/gateway/ims/${destination_number}",rest:1,codec:[],count:1,timeout:60,fault_threshold:0,ignore_early_media:!0,employee_id:"",bill_least1s:1,bill_round:0,bill_round_minute:0,addTime:1678961299821,updateTime:1678961314910},{tenantId:1,id:"cl1004",name:"line4",caller:"18118181821",dialstr:"sofia/gateway/ims/${destination_number}",rest:1,codec:[],count:1,timeout:60,fault_threshold:0,ignore_early_media:!0,employee_id:"",bill_least1s:1,bill_round:0,bill_round_minute:0,addTime:1678961299821,updateTime:1678961314910}],total:4});function G(){const _=$,n=a([]),i=a(!0),t=c({total:0,pageSize:10,currentPage:1,background:!0});let o=a([{label:"操作",fixed:"right",width:180,slot:"operation"}]);const p=m(()=>["!h-[20px]","reset-margin","!text-gray-500","dark:!text-white","dark:hover:!text-primary"]),f=m(()=>n.value.slice((t.currentPage-1)*t.pageSize,t.currentPage*t.pageSize));function g(e,r){n.value.splice(r,1),t.total=t.total-1,q("删除成功",{customClass:"el",type:"success"})}function h(e){}function b(e){typeof e!="object"&&(t.currentPage=e)}const y=a(),w=c({name:"",caller:""});async function l(){i.value=!0;const e=_.value;n.value=e.list,t.total=e.total,u(),i.value=!1}let s=a();const u=async()=>{const{result:e}=await F(),{result:r}=await z(e),v=await P();s.value=e;const D=v.result.LineTemplate.children;await I(e,Y);const{useDataList:d,useColumns:T}=x(r,D);t.total=d.length,n.value=d,o.value=T},L=e=>{e&&(e.resetFields(),l())};return C(()=>{l()}),{loading:i,columns:o,dataList:n,pagination:t,buttonClass:p,searchForm:w,searchFormRef:y,onSearch:l,resetForm:L,handleDelete:g,handleSizeChange:h,handleCurrentChange:b,getInitList:u,names:s,reqSetInfo:R,currentData:f}}export{G as useRole};
