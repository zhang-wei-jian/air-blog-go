import{_ as E,aT as K,n as o,t as F,r as m,o as w,i as J,j as t,g as i,c as I,C as O,w as R,e as a,h as z,R as $,f as P,K as D,bk as G,ai as H,aj as M}from"./index-8391854f.js";import{i as f}from"./mockAxios-001c3fdc.js";import{_ as Y}from"./MyAutocomplete.vue_vue_type_script_setup_true_lang-0b0173c6.js";const U=v=>(H("data-v-b681353b"),v=v(),M(),v),q={class:"body"},A={key:0},Q={key:1},W=U(()=>i("p",null,null,-1)),X={class:"tokenForm"},Z=U(()=>i("p",null,null,-1)),ee=U(()=>i("p",null,null,-1)),ae={__name:"index",setup(v){K();const V=localStorage.getItem("token"),c=o(!1),r=o("http://down.ddrj.com:88"),y=o("abc"),b=o(""),L=o(),p=o(localStorage.getItem("token")),_=o(""),k=o(),g=o([]),h=o(),x=o("");let u,N;const T=async()=>{try{u=new URL(r.value),N=u.origin}catch{N=location.origin}const s=await f.get(`${r.value}/api?action=gettoken`,{params:{key:y.value,organization:b.value}}).catch(e=>{alert("请求失败"),G.done()});if(s.token){p.value=s.token,c.value=!1;const e=await f.get(`${r.value}/api?action=getactionnames`,{});g.value=e;let n=u==null?void 0:u.search;new URLSearchParams(n)}c.value=!1};F(async()=>{const s=await f.get(`${r.value}/api?action=getactionnames`,{});g.value=s;let e=u==null?void 0:u.search;new URLSearchParams(e)});const B=async()=>{const s=await f({method:"post",url:`${r.value}/api`,params:{action:_.value,token:p.value,name:x.value},data:k.value});L.value=s,h.value=JSON.stringify(s,null,2)};return(s,e)=>{const n=m("el-input"),d=m("el-form-item"),S=m("el-form"),C=m("el-button"),j=m("el-card");return w(),J(j,null,{default:t(()=>[i("div",q,[!p.value&&!L.value||p.value&&c.value?(w(),I("h1",A,"获取Token")):p.value&&!c.value?(w(),I("h1",Q,"Get Status")):O("",!0),R(i("div",null,[a(S,{"label-width":"100px"},{default:t(()=>[a(d,{label:"  地址:"},{default:t(()=>[a(n,{modelValue:r.value,"onUpdate:modelValue":e[0]||(e[0]=l=>r.value=l),type:"text",placeholder:"URL"},null,8,["modelValue"])]),_:1}),a(d,{label:" KEY:"},{default:t(()=>[a(n,{modelValue:y.value,"onUpdate:modelValue":e[1]||(e[1]=l=>y.value=l),type:"text",placeholder:"key"},null,8,["modelValue"])]),_:1}),a(d,{label:"    租户: "},{default:t(()=>[a(n,{modelValue:b.value,"onUpdate:modelValue":e[2]||(e[2]=l=>b.value=l),type:"text",placeholder:"organization","onKeyup:Enter":T},null,8,["modelValue"])]),_:1})]),_:1}),W,a(C,{onClick:T,type:"primary",plain:""},{default:t(()=>[z(" Next ")]),_:1})],512),[[$,c.value]]),R(i("div",null,[a(S,{"label-width":"100px"},{default:t(()=>[a(d,{label:" Token:",class:"tokenForm"},{default:t(()=>[i("div",X,[a(n,{modelValue:P(V),"onUpdate:modelValue":e[3]||(e[3]=l=>D(V)?V.value=l:null),type:"text",placeholder:"Token"},null,8,["modelValue"])])]),_:1}),a(d,{label:"  action:"},{default:t(()=>[a(Y,{modelValue:_.value,"onUpdate:modelValue":e[4]||(e[4]=l=>_.value=l),dataList:g.value},null,8,["modelValue","dataList"])]),_:1}),a(d,{label:" name: "},{default:t(()=>[a(n,{modelValue:x.value,"onUpdate:modelValue":e[5]||(e[5]=l=>x.value=l),type:"text",placeholder:"name参数",autosize:""},null,8,["modelValue"])]),_:1}),a(d,{label:" body: "},{default:t(()=>[a(n,{modelValue:k.value,"onUpdate:modelValue":e[6]||(e[6]=l=>k.value=l),type:"textarea",placeholder:"请求体参数",rows:3},null,8,["modelValue"])]),_:1})]),_:1}),Z,a(C,{onClick:B,type:"primary",plain:"",disabled:!_.value},{default:t(()=>[z(" 发送 ")]),_:1},8,["disabled"]),ee,a(S,{"label-width":"100px"},{default:t(()=>[a(d,{label:"response:"},{default:t(()=>[a(n,{modelValue:h.value,"onUpdate:modelValue":e[7]||(e[7]=l=>h.value=l),type:"textarea",placeholder:"响应体数据",autosize:""},null,8,["modelValue"])]),_:1})]),_:1})],512),[[$,!c.value]])])]),_:1})}}},ne=E(ae,[["__scopeId","data-v-b681353b"]]);export{ne as default};
